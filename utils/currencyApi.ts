
const RATES: { [key: string]: number } = {
  USD: 1,
  EUR: 0.92,
  GBP: 0.78,
  JPY: 146.5,
  INR: 83.2,
  CAD: 1.36,
  AUD: 1.52,
  CHF: 0.88,
  CNY: 7.25,
  BRL: 5.1,
  RUB: 92.0,
  MXN: 16.8,
  ZAR: 18.5,
  SGD: 1.35,
  HKD: 7.85,
  KRW: 1330,
  SEK: 10.5,
  NOK: 10.7,
  DKK: 6.85,
  PLN: 4.0,
  TRY: 32.5,
  SAR: 3.75,
  AED: 3.67,
  NZD: 1.62,
  THB: 35.5,
  MYR: 4.7,
  IDR: 15300,
  PHP: 56.5,
  CZK: 22.5,
  HUF: 355,
  ARS: 350,
  CLP: 900,
  COP: 3900,
  PEN: 3.7,
  EGP: 31,
  VND: 24500,
  PKR: 278,
  BDT: 110,
  LKR: 325,
  MAD: 10.1,
  TWD: 32.2,
  ILS: 3.7,
  QAR: 3.64,
  KWD: 0.31,
  OMR: 0.38,
  JOD: 0.71,
  BHD: 0.38,
  DZD: 134,
  NGN: 1300,
  GHS: 12.5,
  KES: 160,
  UGX: 3800,
  RON: 4.6,
  HRK: 7.5,
  ISK: 140,
  TND: 3.1,
  XOF: 600,
  XAF: 600,
  BYN: 3.2,
  UAH: 39,
  GEL: 2.7,
  BAM: 1.8,
  MKD: 56,
  ALL: 95,
  MOP: 8.1,
  BGN: 1.8,
  SDG: 600,
  SYP: 13500,
  IQD: 1300,
  LYD: 4.8,
  TMT: 3.5,
  AZN: 1.7,
  AMD: 390,
  KZT: 460,
  MNT: 3400,
  LAK: 21000,
  MMK: 2100,
  KYD: 0.83,
  BSD: 1,
  BZD: 2,
  FJD: 2.2,
  WST: 2.7,
  TOP: 2.4,
  PGK: 3.6,
  SBD: 8.2,
  VUV: 120,
  XPF: 110,
  BTN: 83.2,
  NPR: 133,
  SCR: 14.5,
  MUR: 45,
  LSL: 18.5,
  SZL: 18.5,
  ZMW: 24.5,
  MWK: 1700,
  BWP: 13.5,
  NAD: 18.5,
  AOA: 830,
  CDF: 2800,
  GNF: 8700,
  SLL: 21000,
  XCD: 2.7,
  HTG: 135,
  DOP: 57.5,
  JMD: 155,
  TTD: 6.8,
  GTQ: 7.8,
  HNL: 24.5,
  NIO: 36.5,
  PAB: 1,
  CRC: 540,
  UYU: 39,
  BOB: 6.9,
  PYU: 7300,
  SRD: 38,
  GYD: 210,
  ANG: 1.8,
  AWG: 1.8,
  TZS: 2550,
  MZN: 64,
  // ZAR already defined above
};

export function getAllCurrencies(): string[] {
  return Object.keys(RATES).sort();
}

export async function convertCurrency(from: string, to: string, amount: string): Promise<{ result: string | null; error: string | null }> {
  const amt = Number(amount);
  if (isNaN(amt) || amt <= 0) {
    return { result: null, error: 'Please enter a valid amount.' };
  }
  if (!RATES[from] || !RATES[to]) {
    return { result: null, error: 'Unsupported currency.' };
  }
  // Convert from source to USD, then USD to target
  const usd = amt / RATES[from];
  const converted = usd * RATES[to];
  return { result: converted.toFixed(2), error: null };
}
